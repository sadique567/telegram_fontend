<!DOCTYPE html>
<html>
<head>
  <title>Telegram Login</title>
</head>
<body>

<h2>Login with Telegram</h2>

<script
  async
  src="https://telegram.org/js/telegram-widget.js?22"
  data-telegram-login="my_flutter_login8ms8_bot"
  data-size="large"
  data-userpic="true"
  data-radius="10"
  data-request-access="write"
  data-on-auth="onTelegramAuth">
</script>

<script>
  function onTelegramAuth(user) {
    fetch("http://localhost:3000/auth/telegram", {
      method: "POST",
      headers: {
        "Content-Type": "application/json"
      },
      body: JSON.stringify(user)
    })
    .then(res => res.json())
    .then(data => {
      alert("Login success!");
      console.log(data);
    })
    .catch(err => console.error(err));
  }
</script>

</body>
</html>
