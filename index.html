<!DOCTYPE html>
<html>
<head>
  <title>Telegram Login</title>
</head>
<body>

<script async src="https://telegram.org/js/telegram-widget.js?22"
  data-telegram-login="flutter_login_bot"
  data-size="large"
  data-userpic="true"
  data-onauth="onTelegramAuth">
</script>

<script>
  function onTelegramAuth(user) {
    fetch("https://telegram-login-backend-gup5.onrender.com/telegram-login", {
      method: "POST",
      headers: {"Content-Type": "application/json"},
      body: JSON.stringify(user)
    })
    .then(res => res.json())
    .then(data => {
      if (data.success) {
        window.location.href = "flutter://login-success";
      }
    });
  }
</script>

</body>
</html>
